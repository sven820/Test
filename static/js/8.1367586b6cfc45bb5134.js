webpackJsonp([8],{"4JYG":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SHEET_FLAG:0,USER_SCORE_FONT_SIZE:11,FULL_SCORE_FONT_SIZE:14,SUBTOPIC_SCORE_FONT_SIZE:12,TOTAL_SCORE_FONT_SIZE:50,A3_SHEET:{WIDTH:420,HEIGHT:297},A4_SHEET:{WIDTH:210,HEIGHT:297},A3_SHEETMM:{WIDTH:2199,HEIGHT:1555},A4_SHEETMM:{WIDTH:1100,HEIGHT:1555},SMALL_PIC_SIZE:{WIDTH:15,HEIGHT:10}}},"5R2f":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={getSectionNumsByIdx:function(e,t){var i=0;return t&&t.forEach(function(t){t.sections.forEach(function(t){t.contents.branch.forEach(function(t){var n=t.ixList;$.inArray(e,n)>-1&&i++})})}),i},getMovePortMarkInfo:function getMovePortMarkInfo(pageSheets,topics){var movePortJsonFile=[],tempPageSheetSection=[];pageSheets.forEach(function(e){e.sections.forEach(function(e){tempPageSheetSection.push(e)})});for(var i=0;i<tempPageSheetSection.length;){var section=tempPageSheetSection[i],curNumList=section.contents.branch[0].ixList;if(1==curNumList.length&&""!=topics[curNumList[0]-1].traceScripts&&"[]"!=topics[curNumList[0]-1].traceScripts){var sectionNum=this.getSectionNumsByIdx(curNumList[0],pageSheets);if(1==sectionNum){var traceScriptArr=eval("("+topics[curNumList[0]-1].traceScripts+")");movePortJsonFile.push(traceScriptArr[0].path)}else{for(var height=0,j=0;j<sectionNum;j++)height=Math.max(height,tempPageSheetSection[i+j].contents.position.height);for(var isMax=!1,_j=0;_j<sectionNum;_j++)if(height!=tempPageSheetSection[i+_j].contents.position.height||isMax)movePortJsonFile.push("");else{var _traceScriptArr=eval("("+topics[curNumList[0]-1].traceScripts+")");movePortJsonFile.push(_traceScriptArr[0].path)}}i+=sectionNum}else movePortJsonFile.push(""),i++}return movePortJsonFile},getSheetMarkings:function getSheetMarkings(pageSheets,topics){for(var sectionMarkings=[],curSection=[],nextSection=[],sheetMarkings=[],nextPageInitNum=0,curNumList=[],nextNumList=[],size=pageSheets.length,movePortJsonFile=this.getMovePortMarkInfo(pageSheets,topics),i=0;i<size;i++)for(var tempPageSheet=pageSheets[i],sectionSize=tempPageSheet.sections.length,j=nextPageInitNum;j<sectionSize;j++){curSection=tempPageSheet.sections[j],curNumList=curSection.contents.branch[0].ixList;var markingContent=[];try{var content="";if(curNumList.length>=1)for(var tempMarkingContent=void 0,numIndex=0;numIndex<curNumList.length;numIndex++)content=topics[curNumList[numIndex]-1].markingContents,"string"==typeof content&&content.length>0&&(tempMarkingContent=eval("("+eval("("+content+")")+")"),markingContent=markingContent.concat(tempMarkingContent))}catch(e){markingContent=[]}if(j!=sectionSize-1)nextSection=tempPageSheet.sections[j+1],nextNumList=nextSection&&nextSection.contents&&nextSection.contents.branch[0].ixList||[];else if(i!=size-1){var nextPageSheet=pageSheets[i+1];nextSection=nextPageSheet.sections[0],nextNumList=nextSection&&nextSection.contents&&nextSection.contents.branch[0].ixList||[]}else nextNumList=[],sectionMarkings.push(markingContent);if(nextNumList.length>0)if(curNumList[0]!=nextNumList[0])sectionMarkings.push(markingContent);else{var contentSize=markingContent&&markingContent.length;if(0==contentSize)sectionMarkings.push(markingContent);else{for(var sectionNum=this.getSectionNumsByIdx(curNumList[curNumList.length-1],pageSheets),n=0;n<sectionNum;n++){for(var marking=[],k=0;k<contentSize;k++)markingContent[k].num==n&&marking.push(markingContent[k]);sectionMarkings.push(marking)}j!=sectionSize-1?(j+=sectionNum-1,j>sectionSize-1&&(j=sectionSize,nextPageInitNum+=sectionNum-(sectionSize-j))):nextPageInitNum=sectionNum-1}}}return sectionMarkings.reverse(),movePortJsonFile.reverse(),pageSheets.forEach(function(e){var t=[];e.sections.forEach(function(e,i){var n={};n.trace=sectionMarkings.pop(i),n.left=e.contents.position.left,n.top=e.contents.position.top,n.width=e.contents.position.width,n.height=e.contents.position.height,n.moveportfile=movePortJsonFile.pop(i),t.push(n)}),sheetMarkings.push(t)}),sheetMarkings}}},"8hOl":function(e,t,i){"use strict";var n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("canvas",{ref:"mark_canvas",staticStyle:{position:"absolute","z-index":"1000","pointer-events":"none"}}),e._v(" "),i("div",{ref:"imgMain",staticClass:"imgMain flex-center flex-v",attrs:{id:"imgMain"}},e._l(e.sheetImages,function(t,n){return i("div",{key:"url"+n,ref:"imageInclude",refInFor:!0,staticStyle:{position:"relative"}},[i("img",{ref:"img",refInFor:!0,staticClass:"sheet-image",attrs:{src:t},on:{load:function(t){return e.loadImageEnd(n)}}}),e._v(" "),0===n?i("span",{staticClass:"section",staticStyle:{position:"absolute","z-index":"9",background:"rgba(254,240,194,0.5)",float:"right","font-weight":"bold",color:"red","font-family":"PingFangSC-Regular"},style:{"font-size":e.totalScoreFontSize+"px",top:"0%",left:"0%"},domProps:{textContent:e._s(e.getTotalScoreModel())}}):e._e(),e._v(" "),e._l(e.sectionData[n],function(t,n){return i("p",{key:n,staticClass:"section",staticStyle:{position:"absolute","z-index":"9",float:"right","font-weight":"bold",color:"red","font-family":"PingFangSC-Regular",display:"block","margin-block-start":"1em","margin-block-end":"1em","margin-inline-start":"0px","margin-inline-end":"0px","-webkit-margin-before":"1em","-webkit-margin-after":"1em","-webkit-margin-start":"0","-webkit-margin-end":"0"},style:e.getSectionTopicStyle(t),attrs:{id:"eachSectionScoreMark"},domProps:{textContent:e._s(t.userScore+"分")}})}),e._v(" "),e._l(e.stepScores[n],function(t,n){return i("p",{key:t.dispTitle+n,staticClass:"setpScore",staticStyle:{position:"absolute",float:"left","display:\n        display":"block","margin-block-start":"1em","margin-block-end":"1em","margin-inline-start":"0px","margin-inline-end":"0px","-webkit-margin-before":"1em","-webkit-margin-after":"1em","-webkit-margin-start":"0","-webkit-margin-end":"0"},style:{"font-size":e.stepScoreFontSize+"px",top:e.changeTopPXtoRate(t.position.top)+"%",left:e.changeLeftPXtoRate(t.position.left)+"%"}},[i("span",{staticStyle:{"font-family":"PingFangSC-Regular"},style:{"font-size":e.stepScoreFontSize+"px"},domProps:{textContent:e._s(t.dispTitle+":")}}),e._v(" "),i("span",{staticStyle:{color:"red","font-family":"PingFangSC-Regular"},style:{"font-size":e.stepScoreFontSize+"px"},domProps:{textContent:e._s(t.score+"分")}})])}),e._v(" "),e._l(e.sheetMarkings[n],function(t,o){return i("div",{key:o+"item"},[e._l(t.trace,function(n,o){return i("i",{key:"trace"+o,class:e.markContentUtil.getMarkContentClass(n),style:e.markContentUtil.getMarkContentStyle(n,t,e.widthMM2PX,e.heightMM2PX,e.imgIncludeWidth,e.imgIncludeHeight),domProps:{textContent:e._s(n.content)}})}),e._v(" "),e._l(e.spotMarkList[n][o],function(t,n){return i("span",{key:n,style:e.markContentUtil.getSpotMarkContentStyle(t),domProps:{textContent:e._s(t.content)}})})],2)}),e._v(" "),e._l(e.objectAnswerStyles[n],function(e,t){return i("div",{key:"style"+t,style:e})})],2)}),0)])},staticRenderFns:[]};t.a=n},SDED:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i("4JYG"),s=(n=o)&&n.__esModule?n:{default:n};t.default={initObjectData:function(e,t,i,n,o,s){for(var r=this.getOtherSize(n,e,o,s),a=r.widthMM2PX,c=r.heightMM2PX,h=r.specialWidth,l=r.specialHeight,f={},u={},p=0;p<t.length;p++)u[t[p].topicSort]=t[p].standardAnswer,f[t[p].topicSort]=t[p].answer;var S=297/1555;1===i&&(S=1);for(var g=[],d=0;d<e.pageSheets.length;d++){for(var _=[],M=0;M<e.pageSheets[d].sections.length;M++){var m=e.pageSheets[d].sections[M];if("SingleChoice"===m.type||"MultiChoice"===m.type||"Object"===m.type)for(p=0;p<m.contents.branch.length;p++){var k=m.contents.branch[p];if(1!==i)for(var v=0;v<k.ixList.length;v++){var T=k.firstOption.left*S;if("X"!==(W=f[k.ixList[v]])&&"O"!==W&&W.length>0)for(var I=0;I<W.length;I++){var x=W[I],b=-1!==k.chooses.indexOf("T");k.smallTopicTypeList&&2===k.smallTopicTypeList[v]&&!b&&(x="T"===x?"A":"B");var w=k.chooses.indexOf(x),P=0,E=0;"TranscriptsPoints"===e.answerSheetFrom&&(P+=m.contents.position.left),e.isObjectVerticalAlign&&k.chooses.length<=4?E=v*(k.colOffset+2)*S:"A4"===e.paperType?E=w*(k.colOffset+1)*S:"A3"===e.paperType&&(E=w*(k.colOffset+1)*S);var H=(k.position.left+T+E+P)*h,y=0,C=0;"TranscriptsPoints"===e.answerSheetFrom&&(y+=m.contents.position.top),C=e.isObjectVerticalAlign&&k.chooses.length<=4?w*(k.rowOffset+1)*S:v*(k.rowOffset+1)*S;var D=k.firstOption.top*S,L=(k.position.top+D+C+y)*l,A=k.firstOption.width*S*h,O=k.firstOption.height*S*l,N="1px solid #FF0100";-1!==u[k.ixList[v]].indexOf(W[I])&&(N="1px solid #05C1AE");var j=0,F=0;"TranscriptsPoints"===e.answerSheetFrom?"A4"===e.paperType?(j=.6*l,F=-1*h):e.paperType:"A3"===e.paperType?(j=.3*l,F=.3*h):"A4"===e.paperType&&(j=-1*l,F=.3*h);var X={position:"absolute",width:100*A/o.offsetWidth+"%",height:100*O/o.offsetHeight+"%",top:100*(L-j)/o.offsetHeight+"%",left:100*(H+F)/o.offsetWidth+"%",border:N,"box-sizing":"initial"};_.push(X)}}else for(v=0;v<k.ixList.length;v++){var W;if("X"!==(W=f[k.ixList[v]])&&"O"!==W&&W.length>0)for(I=0;I<W.length;I++){x=W[I],b=-1!==k.chooses.indexOf("T");k.smallTopicTypeList&&2===k.smallTopicTypeList[v]&&!b&&(x="T"===x?"A":"B");w=k.chooses.indexOf(x);var z=0;D=k.firstOption.top,T=k.firstOption.left;1===m.objItemLocateParam.Direct?(C=w*k.rowOffset,z=v*k.colOffset):(C=v*k.rowOffset+2,z=w*k.colOffset-4);H=(k.position.left+T+z)*a,L=(k.position.top+D+C)*c,A=k.firstOption.width*a,O=k.firstOption.height*c,N="2px solid #FF0100";-1!==u[k.ixList[v]].indexOf(W[I])&&(N="2px solid #05C1AE");X={position:"absolute",width:A+"px",height:O+"px",top:100*L/o.offsetHeight+"%",left:100*H/o.offsetWidth+"%",border:N,"box-sizing":"initial"};_.push(X)}}}}g.push(_)}return g},getOtherSize:function(e,t,i,n){var o=i.offsetWidth;if(1===e.answerSheetLocationDTO.comeFrom){""!==e.answerSheetLocationDTO.pageSheets[0].heightAfterCorrect&&("A3"===e.answerSheetLocationDTO.paperType?(s.default.A3_SHEETMM.WIDTH=parseInt(e.answerSheetLocationDTO.pageSheets[0].widthAfterCorrect),s.default.A3_SHEETMM.HEIGHT=parseInt(e.answerSheetLocationDTO.pageSheets[0].heightAfterCorrect)):(s.default.A4_SHEETMM.WIDTH=parseInt(e.answerSheetLocationDTO.pageSheets[0].widthAfterCorrect),s.default.A4_SHEETMM.HEIGHT=parseInt(e.answerSheetLocationDTO.pageSheets[0].heightAfterCorrect)));var r=n.offsetWidth,a=n.offsetHeight;"A3"===e.answerSheetLocationDTO.paperType?(e.widthMM2PX=r/s.default.A3_SHEETMM.WIDTH,e.heightMM2PX=a/s.default.A3_SHEETMM.HEIGHT):"A4"===e.answerSheetLocationDTO.paperType&&(e.widthMM2PX=r/s.default.A4_SHEETMM.WIDTH,e.heightMM2PX=a/s.default.A4_SHEETMM.HEIGHT)}else"A3"===e.answerSheetLocationDTO.paperType?(e.widthMM2PX=(o-16)/s.default.A3_SHEET.WIDTH,"TranscriptsPoints"===t.answerSheetFrom?e.specialwidthMM2PX=(o-3)/s.default.A3_SHEET.WIDTH:e.specialwidthMM2PX=(o+6)/s.default.A3_SHEET.WIDTH):"A4"===e.answerSheetLocationDTO.paperType&&(e.widthMM2PX=(o-16)/s.default.A4_SHEET.WIDTH,e.specialwidthMM2PX=(o+5)/s.default.A4_SHEET.WIDTH),e.heightMM2PX=e.widthMM2PX;return{heightMM2PX:e.heightMM2PX,widthMM2PX:e.widthMM2PX,specialWidth:e.specialwidthMM2PX,specialHeight:e.specialwidthMM2PX}}}},SS8e:function(e,t,i){"use strict";!function(e){var t=window.document.querySelector('meta[name="viewport"]');if(t){t.setAttribute("content","width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=3.0, user-scalable=yes")}}()},Vxui:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i("4JYG"),s=(n=o)&&n.__esModule?n:{default:n};t.default={changeTopPXtoRate:function(e,t){return e/t*100},changeLeftPXtoRate:function(e,t){return e/t*100},getSheetSectionsData:function(e,t,i,n,o,s,r){if(!e)return{sectionData:[],totalScore:{},stepScores:[]};for(var a=[],c=[],h=[],l=0;l<e.length;l++){for(var f={},u={},p={},S=[],g=[],d=e[l].sections,_=e[l],M=null,m=0;m<d.length;m++){var k=[],v=[],T=[];if(0===m)if(0!==l){var I=e[l-1].sections;if(f=I[I.length-1],u=_.sections[0],k=f.contents.branch[f.contents.branch.length-1].ixList,v=u.contents.branch[0].ixList,l===e.length-1){if(!this.isNeedDealSection(k,v,T,h))continue;M=v[0]===k[0]?this.getEdgeScoreSection(f,u,null,1):u}else{if(T=(p=(x=e[l+1].sections)[x.length-1]).contents.branch[0].ixList,!this.isNeedDealSection(k,v,T,h))continue;M=this.getMiddleScoreSection(f,u,p,null,o)}}else if(u=_.sections[0],1===_.sections.length)M=u;else{if(p=_.sections[1],v=u.contents.branch[u.contents.branch.length-1].ixList,T=p.contents.branch[0].ixList,!this.isNeedDealSection(k,v,T,h))continue;M=v[0]===T[0]?this.getEdgeScoreSection(null,u,p,2,o):u}else if(m===d.length-1)if(f=_.sections[m-1],u=_.sections[m],k=f.contents.branch[f.contents.branch.length-1].ixList,v=u.contents.branch[0].ixList,l<e.length-1){var x;if(T=(p=(x=e[l+1].sections)[0]).contents.branch[0].ixList,!this.isNeedDealSection(k,v,T,h))continue;M=this.getMiddleScoreSection(f,u,p,null,o)}else{if(!this.isNeedDealSection(k,v,T,h))continue;M=v[0]===k[0]?this.getEdgeScoreSection(f,u,null,1,o):u}else{if(f=_.sections[m-1],u=_.sections[m],p=_.sections[m+1],k=f.contents.branch[f.contents.branch.length-1].ixList,v=u.contents.branch[0].ixList,T=p.contents.branch[0].ixList,!this.isNeedDealSection(k,v,T,h))continue;var b=null;l>0&&(b=e[l-1].sections),M=this.getMiddleScoreSection(f,u,p,b,o)}if(M){var w=this.getScoreWtihSectionModel(M,t,i,n,o,s,r);S.push(w),g.push(w.stepScore)}}a.push(S);var P=this.flatten(g);c.push(P)}return{sectionData:a,totalScore:this.getTotlaScoreAndPosition(i),stepScores:c}},getMiddleScoreSection:function(e,t,i,n,o){var s=e.contents.branch[e.contents.branch.length-1].ixList,r=t.contents.branch[0].ixList,a=i&&i.contents.branch[0].ixList||[];return s[0]===r[0]?this.getEdgeScoreSection(e,t,null,1,o):r[0]===a[0]?this.getEdgeScoreSection(null,t,i,2,o):n&&this.isInNextPageSheet(r[0],n)?null:t},getEdgeScoreSection:function(e,t,i,n,o){if(1===n){if(t.contents.position.height>e.contents.position.height&&t.contents.position.height*o<=s.default.USER_SCORE_FONT_SIZE)return t}else if(2===n)if(t.contents.position.height<i.contents.position.height){if(t.contents.position.height*o>s.default.USER_SCORE_FONT_SIZE)return t}else if(t.contents.position.height>=i.contents.position.height)return t;return null},isInNextPageSheet:function(e,t){for(var i=t&&t.length,n=0;n<i;n++)for(var o=t[n].contents.branch,s=o&&o.length,r=0;r<s;r++){var a=o[r].ixList;if(a&&e===a[a.length-1])return!0}return!1},isNeedDealSection:function(e,t,i,n){return(t[0]===e[0]||t[0]===i[0]||n.indexOf(t[0])<0)&&(n.push(t[0]),!0)},getScoreWtihSectionModel:function(e,t,i,n,o,s,r){var a=e.contents,c=a.branch;if(!c)return{userScore:0,fullScore:0,position:{},scoreType:e.type,stepScore:[]};for(var h=[],l=[],f=0;f<c.length;f++){var u=c[f],p=u.ixList;if(p.length>0){var S=p.join(",");(h.indexOf(S)<0||h.length<1)&&(h.push(S),l.push(u))}}for(var g=l,d=0,_=0,M=[],m=0;m<g.length;m++){var k=this.getScoreWithBranchModel(g[m],t,i);d+=k.userScore,_+=k.fullScore,M.push(k.stepScore)}var v=this.getPositionWithContent(a,n,o,s,r);return M=this.flatten(M),this.getStepScorePosition(M,v,s,r),{userScore:this.fixNum(d,1),fullScore:this.fixNum(_,1),position:v,scoreType:e.type,stepScore:M}},getScoreWithBranchModel:function(e,t,i){for(var n=e.ixList,o=0,s=0,r=[],a=0;a<n.length;a++){var c=i[n[a]-1];s+=c.standardScore,o+=c.score;var h=this.getTopicStepScore(c,n.length,t);r.push(h)}return{userScore:o,fullScore:s,stepScore:r=this.flatten(r)}},getPositionWithContent:function(e,t,i,n,o){var s=e.position,r=n>20?n:20,a=n>20?n/2:7,c=n>20?parseInt(n)+120:100;return{left:Math.abs(Math.round((s.left+s.width)*t))-r,top:Math.abs(Math.round(s.top*i))-a,stepleft:Math.abs(Math.round((s.left+s.width)*t))-c}},getStepScorePosition:function(e,t,i,n){for(var o=parseInt(n),s=5*parseInt(n)+10,r=0,a=2,c=2;r<e.length;r++){var h=e[r];if(e.length>3)if(r%2==0){var l=t.top+a*o,f=t.stepleft;h.position={top:l,left:f},a++}else{var u=t.top+c*o,p=t.stepleft+s;h.position={top:u,left:p},c++}else{var S=t.top+c*o,g=t.stepleft+s;h.position={top:S,left:g},c++}}},getTotlaScoreAndPosition:function(e){if(e.length<1)return{userScore:0,fullScore:0,position:{top:0,left:0}};for(var t=0,i=0,n=0;n<e.length;n++){var o=e[n];i+=o.standardScore,t+=o.score}return{userScore:t=Math.round(10*t)/10,fullScore:i=Math.round(10*i)/10,position:{top:0,left:0}}},getTopicStepScore:function(e,t,i){var n=e.subTopics,o=e.topicNumber,s=[],r=e.topicTypeId;if(r&&"00"!==r&&"05"!==r&&"01"!==r&&"03"!==r&&"06"!==r&&1!==t){var a={dispTitle:e.dispTitle,score:e.score};s.push(a)}for(var c=0;c<n.length;c++){var h=n[c];if(h.subTopicIndex>-1){var l=o+"("+h.subTopicIndex+")";if(i[l]){var f={dispTitle:i[l],score:h.score};s.push(f)}}var u=h.stepRecords;if(u)for(var p=0;p<u.length;p++){var S=o+"("+h.subTopicIndex+")("+u[p].stepNum+")";if(i[S]){var g={dispTitle:i[S],score:u[p].score};s.push(g)}}}return s},flatten:function(e){for(;e.some(function(e){return Array.isArray(e)});)e=[].concat.apply([],e);return e},fixNum:function(e,t){t=isNaN(t)?0:t,e=e.toFixed(2);var i=Math.pow(10,t);return Math.round(e*i)/i}}},aUri:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("hkfa"),o=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);var r=i("8hOl");var a=function(e){i("cVIH"),i("toZk")},c=i("C7Lr")(o.a,r.a,!1,a,"data-v-38cf9ab6",null);t.default=c.exports},cVIH:function(e,t){},gkj5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={drawPath:function(e,t,i,n,o,s,r){var a=[],c=t.width,h=t.height,l=t.left,f=t.top;function u(t){t.forEach(function(t,u){if("script"==t.type)_=t.array,M=t.w,m=t.h,(k=e.getContext("2d")).beginPath(),_.forEach(function(e,t){var s=parseInt(e[0]/100),r=parseInt(e[1]/100);s=parseInt((s/M*c+l)*i),r=parseInt((r/m*h+f)*n)+o,0==t?k.moveTo(s,r):k.lineTo(s,r)}),k.strokeStyle="rgb(255, 0, 0)",k.stroke(),k.closePath();else if("spotMark"==t.type){var p=t.x,S=t.y,g=Math.round((l+p*c/100)*i*100)/s,d=Math.round((f+S*h/100)*n*100)/r;a.push({left:g,top:d,content:t.content})}var _,M,m,k})}return $.ajax({async:!1,type:"GET",url:t.moveportfile,timeout:5e3,dataType:"json",success:function(e){u(e)},error:function(){}}),a}}},hkfa:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _reportService=__webpack_require__("PLMy"),_reportService2=_interopRequireDefault(_reportService),_user=__webpack_require__("wMq3"),_user2=_interopRequireDefault(_user),_checkSheetConstant=__webpack_require__("4JYG"),_checkSheetConstant2=_interopRequireDefault(_checkSheetConstant),_MarkContentUtil=__webpack_require__("lBom"),_MarkContentUtil2=_interopRequireDefault(_MarkContentUtil),_MarkDrawPathUtil=__webpack_require__("gkj5"),_MarkDrawPathUtil2=_interopRequireDefault(_MarkDrawPathUtil),_MarkScale=__webpack_require__("SS8e"),_MarkScale2=_interopRequireDefault(_MarkScale),_MarkSectionUtil=__webpack_require__("5R2f"),_MarkSectionUtil2=_interopRequireDefault(_MarkSectionUtil),_MarkObjectTopicUtil=__webpack_require__("SDED"),_MarkObjectTopicUtil2=_interopRequireDefault(_MarkObjectTopicUtil),_MarkScoreUtil=__webpack_require__("Vxui"),_MarkScoreUtil2=_interopRequireDefault(_MarkScoreUtil),_common=__webpack_require__("X2Oc"),_common2=_interopRequireDefault(_common),_elementUi=__webpack_require__("NxjZ");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default={name:"index",data:function(){return{markContentUtil:_MarkContentUtil2.default,markObjectTopicUtil:_MarkObjectTopicUtil2.default,studentId:"",topicSetId:"",token:"",comeFrom:0,paperType:"",imgIncludeWidth:0,imgIncludeHeight:0,answerSheetLocation:Object,widthMM2PX:"1.0",heightMM2PX:"1.0",specialwidthMM2PX:"1.0",extraSheetHeight:0,sheetImages:[],pageSheets:[],markingTopicDetail:{},answerRecords:[],sheetMarkings:[],spotMarkList:[],objectAnswerStyles:[],objectAnswer:{},sheet_flag:0,sheetDatas:{},sectionData:[],totlaScoreData:{},stepScores:[],totalScoreFontSize:"72",sectionScoreFontSize:"32",stepScoreFontSize:"20"}},created:function(){this.studentId=this.$getUrlKey("studentId"),this.topicSetId=this.$getUrlKey("topicSetId"),_user2.default.state.token=this.$getUrlKey("token")},mounted:function(){this.getChecksheetInfo()},methods:{getChecksheetInfo:function getChecksheetInfo(){var _this=this,loadingInstance=_elementUi.Loading.service();_reportService2.default.getChecksheetInfo(this.studentId,this.topicSetId).then(function(response){if(response&&(_this.sheetImages=eval("("+response.sheetImages+")"),_this.sheetDatas=eval("("+response.sheetDatas+")"),_this.answerSheetLocation=eval("("+response.answerSheetLocation+")"),_this.objectAnswer=eval("("+response.objectAnswer+")"),_this.markingTopicDetail=eval("("+response.markingTopicDetail+")"),_this.sheetDatas)){var _Dto=_this.sheetDatas.answerSheetLocationDTO;_this.comeFrom=_Dto.comeFrom,_this.paperType=_Dto.paperType,_this.pageSheets=_this.filterPaperBlank(_Dto.pageSheets),_this.sheet_flag=1===_this.sheetDatas.answerSheetLocationDTO.comeFrom?1:0,_this.answerRecords=_this.sheetDatas.userAnswerRecordDTO&&_this.sheetDatas.userAnswerRecordDTO.answerRecordDetails}_this.$nextTick(function(){loadingInstance.close()})}).catch(function(e){_this.$nextTick(function(){loadingInstance.close()})})},loadImageEnd:function(e){0==e&&this.initScale(this.pageSheets[0])},loadObjectMarkData:function(){var e=this;this.$nextTick(function(){e.objectAnswerStyles=e.markObjectTopicUtil.initObjectData(e.answerSheetLocation,e.objectAnswer,e.sheet_flag,e.sheetDatas,e.$refs.imageInclude[0],e.$refs.img[0])})},getSheetMarkings:function(){var e=this;this.$nextTick(function(){e.sheetMarkings=_MarkSectionUtil2.default.getSheetMarkings(e.pageSheets,e.answerRecords),e.drawPath()})},drawPath:function(){var e=this,t=[];this.sheetMarkings.forEach(function(i,n){var o=[];i.forEach(function(t){var i=_MarkDrawPathUtil2.default.drawPath(e.$refs.mark_canvas,t,e.widthMM2PX,e.heightMM2PX,e.extraSheetHeight*n,e.imgIncludeWidth,e.imgIncludeHeight);o.push(i)}),t.push(o)}),this.spotMarkList=t},initCanvasSize:function(){var e=this;this.$nextTick(function(){var t=e.$refs.mark_canvas;t.width=e.$refs.imgMain.offsetWidth,t.height=e.$refs.imgMain.offsetHeight})},changeTopPXtoRate:function(e){return e/this.imgIncludeHeight*100},changeLeftPXtoRate:function(e){return e/this.imgIncludeWidth*100},filterPaperBlank:function(e){for(var t=[],i=0;i<e.length;i++)e[i].sections.length>0&&t.push(e[i]);return t},getSheetSectionsData:function(){var e=_MarkScoreUtil2.default.getSheetSectionsData(this.pageSheets,this.markingTopicDetail,this.answerRecords,this.widthMM2PX,this.heightMM2PX,this.sectionScoreFontSize,this.stepScoreFontSize);this.sectionData=e.sectionData,this.stepScores=e.stepScores,this.totlaScoreData=e.totalScore},getTotalScoreModel:function(){return this.totlaScoreData?this.totlaScoreData.userScore:""},getSectionTopicStyle:function(e){var t=this.changeTopPXtoRate(e.position.top)+"%",i=this.changeLeftPXtoRate(e.position.left)+"%";return 1!==this.sheet_flag||"SingleChoice"!==e.scoreType&&"MultiChoice"!==e.scoreType&&"Object"!==e.scoreType?{background:"rgba(254,240,194,0.5)","font-size":this.sectionScoreFontSize+"px",top:t,left:i}:{"font-size":this.sectionScoreFontSize+"px",top:t,left:i}},initScale:function(e){var t=this;this.initCanvasSize();var i=this.paperType;this.$nextTick(function(){t.imgIncludeWidth=t.$refs.imageInclude[0].offsetWidth,t.imgIncludeHeight=t.$refs.imageInclude[0].offsetHeight,t.extraSheetHeight=t.$refs.imageInclude[0].offsetHeight;var n=t.$refs.imgMain.offsetWidth,o=t.$refs.img[0].offsetWidth,s=t.$refs.img[0].offsetHeight;1==t.comeFrom?(""!=e.heightAfterCorrect&&("A3"==i?(_checkSheetConstant2.default.A3_SHEETMM.WIDTH=parseInt(e.widthAfterCorrect),_checkSheetConstant2.default.A3_SHEETMM.HEIGHT=parseInt(e.heightAfterCorrect)):(_checkSheetConstant2.default.A4_SHEETMM.WIDTH=parseInt(e.widthAfterCorrect),_checkSheetConstant2.default.A4_SHEETMM.HEIGHT=parseInt(e.heightAfterCorrect))),"A3"==i?(t.widthMM2PX=o/_checkSheetConstant2.default.A3_SHEETMM.WIDTH,t.heightMM2PX=s/_checkSheetConstant2.default.A3_SHEETMM.HEIGHT):"A4"==i&&(t.widthMM2PX=o/_checkSheetConstant2.default.A4_SHEETMM.WIDTH,t.heightMM2PX=s/_checkSheetConstant2.default.A4_SHEETMM.HEIGHT)):("A3"==i?(t.widthMM2PX=(n-16)/_checkSheetConstant2.default.A3_SHEET.WIDTH,t.specialwidthMM2PX=(n+6)/_checkSheetConstant2.default.A3_SHEET.WIDTH,"TranscriptsPoints"==t.answerSheetLocation.answerSheetFrom&&(t.specialwidthMM2PX=(n-5)/_checkSheetConstant2.default.A3_SHEET.WIDTH)):"A4"==i&&(t.widthMM2PX=(n-16)/_checkSheetConstant2.default.A4_SHEET.WIDTH,t.specialwidthMM2PX=(n+5)/_checkSheetConstant2.default.A4_SHEET.WIDTH),t.heightMM2PX=t.widthMM2PX),t.totalScoreFontSize=_common2.default.isTablet()?"72":"36",t.sectionScoreFontSize=_common2.default.isTablet()?"28":"16",t.stepScoreFontSize=_common2.default.isTablet()?"20":"12",t.loadObjectMarkData(),t.getSheetSectionsData(),t.getSheetMarkings()})}}}},lBom:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i("4JYG"),s=(n=o)&&n.__esModule?n:{default:n};t.default={getMarkContentClass:function(e){var t=void 0;switch(e.type){case"rightfd":t="small-right";break;case"okfd":t="small-ok";break;case"wrongfd":t="small-wrong";break;case"edit":case"spotMark":break;case"ellipse":t="ui-draggable"}return t},getMarkContentStyle:function(e,t,i,n,o,r){var a=t.width,c=t.height,h=c*parseInt(e.h)*n/100,l=100*Math.round((t.left+parseInt(e.x)*a/100)*i)/o,f=100*Math.round((t.top+parseInt(e.y)*c/100)*n)/r;s.default.SMALL_PIC_SIZE.WIDTH=1.5*h,s.default.SMALL_PIC_SIZE.HEIGHT=h;var u={position:"absolute",top:f+"%",left:l+"%"};switch(e.type){case"rightfd":case"okfd":case"wrongfd":u.width=s.default.SMALL_PIC_SIZE.WIDTH+"px",u.height=s.default.SMALL_PIC_SIZE.HEIGHT+"px";break;case"edit":u.color="red",u.fontSize="14px",u.marginBlockStart="2em";break;case"spotMark":u.color="red",u.fontSize="14px",u.fontWeight="bold";break;case"ellipse":u.width=s.default.SMALL_PIC_SIZE.width+"px",u.height=s.default.SMALL_PIC_SIZE.HEIGHT+"px",u.borderRadius="50%",u.border="solid 1px #f3002d"}return u},getSpotMarkContentStyle:function(e){return{position:"absolute",top:e.top+"%",left:e.left+"%",color:"red",fontSize:"14px"}}}},toZk:function(e,t){}});